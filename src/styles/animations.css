/* Batman Gotham 3D Animation Styles */

:root {
	--bg: #fff4d1;
	--w1: conic-gradient(from 90deg at 50% 50%, #fff491 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w2: conic-gradient(from 90deg at 50% 50%, #ffdf81 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w3: conic-gradient(from 90deg at 50% 50%, #ffb84f 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w4: conic-gradient(from 90deg at 50% 50%, #ff926f 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w5: conic-gradient(from 90deg at 50% 50%, #acb0b1 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w6: conic-gradient(from 90deg at 50% 50%, #9dc8dc 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w7: conic-gradient(from 90deg at 50% 50%, #577c9a 0% 25%, #fff0 0% 100%)
		no-repeat;
	--w8: conic-gradient(from 90deg at 50% 50%, #2b4e5f 0% 25%, #fff0 0% 100%)
		no-repeat;
}

* {
	transform-style: preserve-3d;
}

.gotham-scene {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  position: fixed;
  top: 0;
  left: 0;
  background-color: #1f1f1f;
  background-image: linear-gradient(315deg, #0cbaba 0%, #380036 74%);
}

/* Sky and Atmosphere */
.sky {
	background: linear-gradient(0deg, #673ab78a, #3c3c3c94);
	height: 100vh;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: 1;
}

.sky:after {
	content: "";
	position: absolute;
	width: 100vw;
	height: 100vh;
	top: 0vh;
	background-image: radial-gradient(2px 2px at 20px 30px, #484341, transparent),
		radial-gradient(2px 2px at 43px 75px, #735454, transparent),
		radial-gradient(2px 1px at 54px 184px, #828282, transparent),
		radial-gradient(2px 2px at 93px 47px, #654b49, transparent),
		radial-gradient(1px 1px at 148px 87px, #3a1919, transparent),
		radial-gradient(2px 2px at 193px 137px, #a26662, transparent),
		radial-gradient(1px 2px at 210px 154px, #805241, transparent),
		radial-gradient(2px 2px at 243px 102px, #866356, transparent),
		radial-gradient(2px 1px at 264px 184px, #794937, transparent),
		radial-gradient(2px 2px at 293px 44px, #735454, transparent),
		radial-gradient(1px 1px at 223px 62px, #ad968e, transparent),
		radial-gradient(2px 2px at 249px 162px, #884228, transparent),
		radial-gradient(2px 2px at 73px 99px, #442e26, transparent),
		radial-gradient(1px 1px at 163px 42px, #403433, transparent),
		linear-gradient(180deg, #fff0 10%, #000 25%, #111 50%, #222 75%, #111 100%);
	background-repeat: no-repeat, repeat;
	background-size: 333px 263px, 333px 163px, 333px 163px, 333px 163px,
		333px 163px, 333px 163px, 333px 163px, 333px 163px, 333px 163px, 333px 163px,
		333px 163px, 333px 163px, 333px 163px, 333px 163px, 100% 100%;
	opacity: 0.5;
	mix-blend-mode: color-burn;
}

.stars {
  display: none; /* Masquer les anciennes étoiles */
}

.moon {
	position: absolute;
	z-index: 2;
	width: 20vmin;
	height: 20vmin;
	left: 20vmin;
	top: 15vmin;
	opacity: 1;
	border-radius: 100%;
	background: radial-gradient(
			circle at 50% 50%,
			#fdfdfd 0% 7vmin,
			#ffffff00 7.25vmin 100%
		),
		#fff;
	box-shadow: 0 0 8em 4em #6493a9, 0 0 8em -16em #ff660000 inset,
		0 0 20px 5px #fdfdfd;
	mix-blend-mode: exclusion;
}

.moon:before {
	content: "";
	background: radial-gradient(
		circle at 100% 60%,
		#ffffff00 0% 60%,
		#dddddd 75% 100%
	);
	width: 100%;
	height: 100%;
	position: absolute;
	top: 0%;
	left: 0%;
	border-radius: 100%;
}

.moon:after {
	content: "";
	background: radial-gradient(
		circle at 0% 40%,
		#efefef 0% 60%,
		#ededed 75% 100%
	);
	width: 4.5vmin;
	height: 4.5vmin;
	position: absolute;
	top: 20%;
	left: 20%;
	border-radius: 100%;
	filter: blur(2px);
}

/* Gotham Skyline */
.skyline {
	height: 65vh;
	position: absolute;
	background: linear-gradient(75deg, #09080c, #0f0323), #0f0323;
	bottom: 0;
	width: 100vw;
	z-index: 5;

	background: var(--w5) 0.5% 54%, var(--w6) 2.5% 56.25%, var(--w7) 0.25% 64.85%,
		var(--w8) 0.75% 84.25%, var(--w6) 19.685% 44.2%, var(--w5) 22.35% 44.25%,
		var(--w7) 15.75% 55.25%, var(--w6) 16.6% 58.25%, var(--w8) 21.475% 54%,
		var(--w8) 23.35% 65.5%, var(--w5) 13.85% 62.25%, var(--w6) 19.35% 65.25%,
		var(--w6) 22.45% 54%, var(--w7) 22.35% 68.15%, var(--w8) 35.35% 55.25%,
		var(--w8) 34.1% 61.25%, var(--w7) 33.1% 84%, var(--w5) 32.35% 73.25%,
		var(--w6) 47.35% 71.25%, var(--w5) 51.5% 82.25%, var(--w8) 41.55% 50%,
		var(--w6) 42.5% 50%, var(--w7) 38.95% 65%, var(--w8) 44.5% 68%,
		var(--w6) 40.55% 50%, var(--w5) 44.85% 59%, var(--w7) 53.25% 66%,
		var(--w8) 49.55% 60%, var(--w6) 50.55% 70%, var(--w5) 53.75% 74%,
		var(--w5) 51.55% 70%, var(--w6) 51.55% 76%, var(--w7) 62.4% 67%,
		var(--w7) 54.75% 57%, var(--w8) 63% 55.5%, var(--w5) 70.5% 66%,
		var(--w6) 68.5% 69%, var(--w7) 70% 51%, var(--w8) 71% 51%, var(--w7) 68.5% 54%,
		var(--w6) 77% 74%, var(--w7) 72% 61%, var(--w5) 78% 55%, var(--w6) 78% 57%,
		var(--w6) 88% 66%, var(--w5) 93.35% 27.5%, var(--w5) 91% 32%,
		var(--w8) 89% 66%, var(--w8) 91% 34.5%, var(--w7) 91% 37%, var(--w7) 91% 41%,
		var(--w6) 99% 86%, var(--w6) 92% 39%, var(--w5) 92% 43%, var(--w7) 93.5% 55%,
		var(--w5) 93% 46%, linear-gradient(75deg, #150e21, #0f0323), #0f0323;

	background-size: 1vw 1vh, 1vw 1.5vh, 1vw 1vh, 1vw 1vh, 1vw 2vh, 1vw 2vh,
		1.15vw 1.25vh, 0.5vw 0.75vh, 1vw 2vh, 0.51vw 1vh, 1vw 1vh, 1vw 2vh, 1vw 1vh,
		1vw 2vh, 1vw 1vh, 1vw 1vh, 1vw 1vh, 0.5vw 1vh, 1vw 2vh, 1vw 1vh, 1vw 1.5vh,
		1vw 2vh, 0.5vw 0.5vh, 1vw 1vh, 1vw 1vh, 0.75vw 1vh, 1vw 1vh, 0.75vw 1.2vh,
		1vw 1vh, 1vw 1vh, 0.75vw 2vh, 1vw 1.25vh, 0.75vw 1vh, 0.5vw 1vh, 1vw 1vh,
		1vw 0.5vh, 1vw 1vh, 1vw 2vh, 1vw 1.25vh, 1.2vw 1.2vh, 0.75vw 1vh, 1vw 2vh,
		1vw 2vh, 1vw 1vh, 1vw 1vh, 1vw 2vh, 1vw 2vh, 1vw 1.5vh, 1vw 1vh, 1vw 2vh,
		1vw 1vh, 0.5vw 1.25vh, 1vw 1.25vh, 1vw 2vh, 1vw 1vh, 1vw 1.2vh, 100% 100%;

	clip-path: polygon(
		0% 100%,
		0% 100%,
		100% 100%,
		100% 100%,
		100% 65%,
		100% 65%,
		97% 65%,
		97% 65%,
		97% 63%,
		97% 63%,
		95% 64%,
		95% 64%,
		94% 32%,
		94% 32%,
		94% 31%,
		94% 31%,
		94% 28%,
		94% 28%,
		93% 23%,
		93% 23%,
		92% 9%,
		92% 9%,
		92% 23%,
		92% 23%,
		91% 28%,
		91% 28%,
		91% 31%,
		91% 31%,
		90% 32%,
		90% 32%,
		90% 64%,
		90% 64%,
		87% 64%,
		87% 64%,
		87% 67%,
		87% 67%,
		86% 67%,
		86% 67%,
		85% 65%,
		85% 67%,
		84% 65%,
		84% 65%,
		84% 66%,
		84% 66%,
		82% 64%,
		85% 70%,
		83% 57%,
		83% 57%,
		81% 58%,
		81% 58%,
		80% 54%,
		81% 54%,
		81% 54%,
		80% 54%,
		80% 51%,
		80% 52%,
		79% 51%,
		79% 51%,
		79% 49%,
		79% 49%,
		79% 48%,
		79% 48%,
		79% 50%,
		79% 50%,
		78% 50%,
		78% 50%,
		78% 53%,
		78% 53%,
		77% 54%,
		77% 54%,
		77% 65%,
		77% 65%,
		75% 65%,
		75% 65%,
		74% 63%,
		74% 63%,
		73% 63%,
		73% 63%,
		73% 54%,
		73% 54%,
		72% 53%,
		72% 53%,
		72% 50%,
		72% 50%,
		69% 50%,
		69% 50%,
		69% 53%,
		69% 53%,
		66% 53%,
		66% 53%,
		66% 55%,
		66% 55%,
		66% 55%,
		66% 55%,
		66% 58%,
		66% 58%,
		65% 58%,
		65% 58%,
		64% 62%,
		64% 61%,
		64% 62%,
		64% 62%,
		64% 54%,
		64% 54%,
		59% 54%,
		60% 54%,
		59% 53%,
		59% 53%,
		58% 53%,
		58% 53%,
		58% 52%,
		58% 52%,
		56% 52%,
		56% 52%,
		56% 53%,
		56% 53%,
		55% 53%,
		55% 53%,
		54% 56%,
		55% 56%,
		53% 56%,
		53% 56%,
		53% 58%,
		53% 58%,
		52% 58%,
		52% 58%,
		51% 54%,
		51% 54%,
		50% 54%,
		50% 54%,
		49% 50%,
		49% 50%,
		47% 50%,
		47% 50%,
		47% 52%,
		47% 52%,
		47% 55%,
		47% 55%,
		47% 63%,
		47% 63%,
		46% 64%,
		46% 64%,
		46% 57%,
		46% 57%,
		45% 57%,
		45% 57%,
		45% 49%,
		45% 49%,
		44% 48%,
		44% 49%,
		44% 46%,
		45% 46%,
		40% 46%,
		41% 46%,
		40% 49%,
		40% 49%,
		39% 49%,
		39% 49%,
		39% 56%,
		39% 56%,
		39% 56%,
		39% 56%,
		38% 53%,
		38% 53%,
		37% 54%,
		35% 54%,
		35% 60%,
		35% 60%,
		34% 60%,
		34% 60%,
		33% 48%,
		33% 48%,
		30% 48%,
		30% 48%,
		30% 45%,
		30% 42%,
		29% 43%,
		29% 45%,
		29% 47%,
		29% 47%,
		29% 47%,
		29% 47%,
		29% 59%,
		28% 59%,
		28% 59%,
		28% 59%,
		28% 52%,
		28% 52%,
		25% 52%,
		25.25% 52%,
		25% 38%,
		25% 38%,
		23% 40%,
		24% 40%,
		20% 40%,
		20% 40%,
		18% 38%,
		18% 38%,
		17.75% 53%,
		18% 53%,
		17% 53%,
		17% 53%,
		17% 54%,
		17% 54%,
		16% 53%,
		16% 53%,
		16% 44%,
		16% 44%,
		12% 44%,
		12% 44%,
		12% 53%,
		12% 53%,
		11% 53%,
		12% 53%,
		11% 47%,
		11% 47%,
		10% 47%,
		10% 47%,
		10% 45%,
		10% 45%,
		9% 45%,
		9% 45%,
		9% 48%,
		9% 48%,
		8% 48%,
		8% 48%,
		8% 51%,
		8% 51%,
		6% 53%,
		6% 53%,
		6% 63%,
		5% 63%,
		4% 61%,
		4% 62%,
		4% 53%,
		4% 53%,
		0% 50%,
		0% 50%,
		0% 95%,
		0% 100%
	);
}

.buildings-layer-1,
.buildings-layer-2,
.buildings-layer-3 {
  display: none; /* Masquer les anciens layers */
}

/* Batman Logo Container */
.batman-logo-container {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  pointer-events: none;
}

.batman-logo {
  width: 100px;
  height: auto;
  display: block;
  will-change: transform, opacity, filter;
  transition: none;
  filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
  position: relative;
  z-index: inherit;
}


/* Atmospheric Effects */
.fog {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 30%;
  background: linear-gradient(to top, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
  z-index: 4;
  opacity: 0.3;
  animation: fog-drift 10s ease-in-out infinite alternate;
}

@keyframes fog-drift {
  0% { transform: translateX(-5%); opacity: 0.2; }
  100% { transform: translateX(5%); opacity: 0.4; }
}

.atmospheric-glow {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, transparent 30%, rgba(0, 203, 186, 0.1) 100%);
  z-index: 5;
  mix-blend-mode: soft-light;
}

/* Responsive Design */
@media (max-width: 768px) {
  .batman-logo {
    width: 80px;
  }
  
  .batman-logo-glow {
    width: 80px;
    height: 80px;
  }
  
  .moon {
    width: 15vmin;
    height: 15vmin;
    left: 15vmin;
    top: 10vmin;
  }
  
}

@media (max-width: 480px) {
  .batman-logo {
    width: 60px;
  }
  
  .batman-logo-glow {
    width: 60px;
    height: 60px;
  }
  
  .skyline {
    height: 50vh;
  }
}

/* Performance Optimizations */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.batman-logo,
.batman-logo-glow {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Smooth scrolling */
html {
  height: 100vh;
  overflow: hidden;
}

/* Prevent horizontal overflow */
body {
  overflow: hidden;
  height: 100vh;
  margin: 0;
  padding: 0;
  position: relative;
}

/* Fond pour la descente dans la ville */
.city-descent-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 400vh;
  background: linear-gradient(to bottom, #0f0323 0%, #09080c 50%, #000 100%);
  z-index: 1;
}

/* Instructions overlay */
.instructions {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 15;
  text-align: center;
  color: rgba(255, 255, 255, 0.7);
  font-size: 14px;
  font-family: 'Arial', sans-serif;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  animation: fade-in-out 4s ease-in-out infinite;
}

/* Animation souris scroll */
.scroll-mouse {
  width: 24px;
  height: 40px;
  border: 2px solid rgba(255, 255, 255, 0.8);
  border-radius: 12px;
  position: relative;
  background: rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(5px);
  margin: 0 auto 10px auto;
}

.scroll-mouse::before {
  content: '';
  position: absolute;
  top: 6px;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: 8px;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 1px;
  animation: scroll-wheel 2s ease-in-out infinite;
}

@keyframes scroll-wheel {
  0% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
  50% {
    opacity: 0.5;
    transform: translateX(-50%) translateY(12px);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
}

/* Animation flèche vers le bas pour mobile */
.scroll-arrow {
  display: none;
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 12px solid rgba(255, 255, 255, 0.8);
  animation: bounce-arrow 2s ease-in-out infinite;
}

@keyframes bounce-arrow {
  0%, 100% {
    transform: translateY(0);
    opacity: 1;
  }
  50% {
    transform: translateY(10px);
    opacity: 0.5;
  }
}

@keyframes fade-in-out {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

/* Instructions spécifiques mobile */
.mobile-instructions {
  display: none;
}

/* Focus pour les contrôles clavier */
.gotham-scene:focus {
  outline: none;
}

/* Responsive Design amélioré */
@media (max-width: 768px) {
  .instructions {
    bottom: 25px;
    font-size: 12px;
    padding: 12px 18px;
    max-width: 280px;
    animation: fade-in-out 3s ease-in-out infinite;
  }
  
  .scroll-mouse {
    display: none;
  }
  
  .scroll-arrow {
    display: block;
  }
  
  .desktop-instructions {
    display: none;
  }
  
  .mobile-instructions {
    display: block;
  }
  
  .batman-logo {
    width: 60px;
  }
  
  .moon {
    width: 12vmin;
    height: 12vmin;
    left: 10vmin;
    top: 8vmin;
  }
  
  .skyline {
    height: 60vh; /* Augmenté pour mieux cacher le logo */
  }
}

@media (max-width: 480px) {
  .instructions {
    bottom: 20px;
    font-size: 11px;
    padding: 10px 15px;
    max-width: 250px;
  }
  
  .batman-logo {
    width: 40px;
  }
  
  .moon {
    width: 10vmin;
    height: 10vmin;
    left: 8vmin;
    top: 6vmin;
  }
  
  .skyline {
    height: 55vh; /* Augmenté pour mieux cacher le logo */
  }
}

/* Optimisations tactiles */
@media (hover: none) and (pointer: coarse) {
  .gotham-scene {
    touch-action: pan-y;
  }
  
  .instructions {
    user-select: none;
    -webkit-user-select: none;
  }
}